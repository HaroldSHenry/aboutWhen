(function(a){a.fn.aboutWhen=function(b){return this.each(function(c){var d=((c)&&(c.text))?c.text:{Nm:["(year)","(month)","(day)","(weekday)"],Mo:["January","February","March","April","May","June","July","August","September","October","November","December"],Wd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ns:"(not sure)"},e=((c)&&(c.widths))?c.widths:["80px","120px","70px","125px"];minY=((c)&&(c.minY)&&(c.minY>1800)&&(c.minY<2050))?c.minY:1900,maxY=((c)&&(c.maxY)&&(c.maxY>0)&&(c.maxY<2060))?c.maxY:new Date().getFullYear(),bId=this.id+"_",i=0,sel=null,opt=null,lbl=null,_bldS=function(h,j){var g=document.createElement("select"),f=document.createElement("option");g.id=h;g.name=g.id;g.className="hsh-when-S";g.onfocus=hideLabel;g.onblur=showLabel;g.onchange=chg;f.setAttribute("value",-1);f.innerHTML="";g.appendChild(f);a(g).css({width:j});return g},_bldL=function(g,h,j){var f=document.createElement("label");f.setAttribute("id",g);f.className="hsh-when-L";f.innerHTML=h;a(f).css({left:j.left,top:j.top});return f},chg=function(){var o="#"+this.id.substr(0,this.id.length-1),q=a(o+"y")[0],n=a(o+"m")[0],g=a(o+"d")[0],p=q.options[q.selectedIndex].value,j=((p>0)&&(p%4==0)&&(p%100!=0)),k=n.selectedIndex,l=31,f=g.selectedIndex,h=null;if(k>0){if(k<9){if(k==2){l=(j)?29:28}else{l=(k&1)?31:30}}else{l=(k&1)?30:31}}if(f>l){f=l;g.selectedIndex=l}if((p>0)&&(k>0)&&(f>0)){h=new Date(p,k,f);if(h){a(o+"w")[0].selectedIndex=h.getDay()+1;a(o+"wL").hide()}}},hideLabel=function(){this.options[0].innerHTML=d.ns;a("#"+this.id+"L").hide()},showLabel=function(){this.options[0].innerHTML="";var f=a("#"+this.id+"L");if(this.selectedIndex>0){f.hide()}else{f.show()}};if(maxY<minY){maxY=minY}sel=_bldS(bId+"y",e[0]);for(i=maxY;i>=minY;i--){opt=document.createElement("option");opt.setAttribute("value",i);opt.innerHTML="&#160;"+i;sel.appendChild(opt)}this.appendChild(sel);lbl=_bldL(bId+"yL",d.Nm[0],a(sel).position());this.appendChild(lbl);sel=_bldS(bId+"m",e[1]);for(i=0;i<12;i++){opt=document.createElement("option");opt.setAttribute("value",i);opt.innerHTML="&#160;"+d.Mo[i];sel.appendChild(opt)}this.appendChild(sel);lbl=_bldL(bId+"mL",d.Nm[1],a(sel).position());this.appendChild(lbl);sel=_bldS(bId+"d",e[2]);for(i=1;i<10;i++){opt=document.createElement("option");opt.setAttribute("value",i);opt.innerHTML="&#160;&#160;&#160;&#160;"+i;sel.appendChild(opt)}for(i=10;i<32;i++){opt=document.createElement("option");opt.setAttribute("value",i);opt.innerHTML="&#160;&#160;&#160;"+i;sel.appendChild(opt)}this.appendChild(sel);lbl=_bldL(bId+"dL",d.Nm[2],a(sel).position());this.appendChild(lbl);sel=_bldS(bId+"w",e[3]);for(i=0;i<7;i++){opt=document.createElement("option");opt.setAttribute("value",i);opt.innerHTML="&#160;"+d.Wd[i];sel.appendChild(opt)}this.appendChild(sel);lbl=_bldL(bId+"wL",d.Nm[3],a(sel).position());this.appendChild(lbl)})}})(jQuery);